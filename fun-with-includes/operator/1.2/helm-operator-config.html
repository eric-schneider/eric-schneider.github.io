<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Couchbase Operator Helm Chart Configuration | Couchbase Docs</title>
    <link rel="canonical" href="eric-schneider.github.io/fun-with-includes/operator/1.2/helm-operator-config.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>(window.dataLayer=window.dataLayer||[]).push({'gtm.start':+new Date(),event:'gtm.js'})</script>
    <script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="operator">
    <meta name="dcterms.identifier" content="1.2">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="eric-schneider.github.io/fun-with-includes">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="#">Lite</a></li>
                  <li><a href="#">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="#">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="#">Kafka</a></li>
                  <li><a href="#">Spark</a></li>
                  <li><a href="#">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="overview.html"><span class="title">Autonomous Operator</span> <span class="version">1.2</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../1.1/overview.html">Autonomous Operator 1.1</a></li>
                  <li><a class="navbar-item" href="../1.0/overview.html">Autonomous Operator 1.0</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-active" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="overview.html">Introduction</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="whats-new.html">What&#8217;s New?</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="prerequisite-and-setup.html">System Requirements</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="best-practices.html">Guidelines and Best Practices</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="cloud-intro.html">Cloud Environment Setup</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-aks.html">Installing on AKS</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-eks.html">Installing on EKS</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-gke.html">Installing on GKE</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Helm</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="helm-setup-guide.html">Helm Guide</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="helm-operator-config.html">Operator Chart Spec</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="helm-cluster-config.html">Couchbase Cluster Chart Spec</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deploying the Operator</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-admission-controller.html">Installing the Admission Controller</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-kubernetes.html">Installing on Kubernetes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="install-openshift.html">Installing on OpenShift</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="operator-config.html">About the Operator Deployment Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="kubernetes-rbac.html">About Kubernetes RBAC</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="upgrading-the-operator.html">Upgrading the Operator</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Managing the Operator</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="list-and-describe.html">Monitoring Kubernetes Resources</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="services.html">Monitoring Services</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="deploying-couchbase.html">Deploying Couchbase Server</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="couchbase-cluster-config.html">Couchbase Configuration Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="networking.html">About Kubernetes Networking</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="xdcr.html">Using XDCR</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="tls.html">Configuring TLS</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="accessing-couchbase.html">Accessing the Couchbase User Interfaces</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="persistent-volumes-guide.html">Persistent Volumes</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="persistent-volumes-setup.html">Persistent Volume Kubernetes Guide</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="persistent-volumes-zoning-guide-legacy.html">Persistent Volume Kubernetes Guide (Legacy)</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="persistent-volumes-zoning-guide.html">Persistent Volume Zoning Guide</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="server-groups.html">Using Server Groups</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="couchbase-clients.html">Using Couchbase Clients</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="running-couchbase.html">Managing Couchbase Server</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="updating-couchbase.html">Modifying a Couchbase Deployment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="scaling-couchbase.html">Scaling a Couchbase Deployment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="node-recovery.html">Recovering From a Node Failure</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="delete-couchbase-cluster.html">Deleting a Couchbase Deployment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="upgrading-couchbase.html">Upgrading a Couchbase Deployment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="upgrading-kubernetes.html">Upgrading the Kubernetes Cluster</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="backup-and-restore.html">Backing up and Restoring a Couchbase Deployment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="conditions-and-events.html">Monitoring Couchbase Events</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="cluster-status-guide.html">Monitoring Couchbase Cluster Status</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Troubleshooting</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="logs-troubleshooting.html">Viewing and Retrieving Logs</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tools</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="cbopinfo.html">cbopinfo</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="demo.html">Couchbase Deployment Tutorial</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="release-notes.html">Release Notes</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Other Resources</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="#">sync-gateway::kubernetes/deploy-cluster.adoc</a>
    </span>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="overview.html">Autonomous Operator</a></li>
    <li class="crumb">Helm</li>
    <li class="crumb"><a href="helm-operator-config.html">Operator Chart Spec</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="file:///Users/ericschneider/repos/couchbase-operator/docs/user/modules/ROOT/pages/helm-operator-config.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Couchbase Operator Helm Chart Configuration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The official Helm chart for the Couchbase Autonomous Operator comes with a default configuration that can be customized to fit your deployment needs.
</blockquote>
</div>
<div class="paragraph">
<p>This page outlines the design and usage of the official Helm chart for deploying the Couchbase Autonomous Operator and its admission controller.
In particular, this page describes the contents of <a href="https://github.com/couchbase-partners/helm-charts/blob/master/couchbase-operator/values.yaml">values.yaml</a>, which contains the Couchbase Operator Chart&#8217;s default values.
Each of the deployed resources is listed and described, along with any available parameterization.</p>
</div>
<div class="paragraph">
<p>For instructions on how to install the chart, including how to customize the chart&#8217;s values, see <a href="helm-setup-guide.html" class="page">Helm Guide for the Couchbase Operator</a>.</p>
</div>
<div class="listingblock">
<div class="title">All available configuration parameters for the Operator Chart</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">rbac:
  create: true
  apiVersion: v1beta1
  clusterRoleAccess: true
  couchbaseServiceAccountName:
  admissionServiceAccountName:

deployments:
  couchbaseOperator: true
  admissionController: true

couchbaseOperator:
  name: "couchbase-operator"
  image:
    repository: couchbase/operator
    tag: 1.2.0-DP
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []
  commandArgs:
    create-crd: true
  readinessProbe:
    initialDelaySeconds: 3
    periodSeconds: 3
    failureThreshold: 19
    port: 8080
  resources:
    cpu: 100m
    memory: 128Mi
  nodeSelector: {}
  tolerations: []

admissionController:
  name: "couchbase-admission-controller"
  image:
    repository: couchbase/admission-controller
    tag: 1.2.0-DP
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []
  verboseLogging: true

admissionService:
  create: true
  name:
  port: 443

admissionCA:
  create: true
  cert:
  key:
  expiration: 365

admissionSecret:
  create: true
  name:
  cert:
  key:</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about-resource-names"><a class="anchor" href="#about-resource-names"></a>About Resource Names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All resources/objects created by the Couchbase Operator Chart adhere to the following naming scheme: <code>&lt;release-name&gt;-&lt;deployment-name&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;release-name&gt;</code></p>
<div class="ulist">
<ul>
<li>
<p>This is autogenerated by Helm unless you <a href="helm-setup-guide.html#release-name" class="page">specify your own name during chart installation</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>&lt;deployment-name&gt;</code></p>
<div class="ulist">
<ul>
<li>
<p>This is the name of the Operator and admission controller deployments.</p>
</li>
<li>
<p>If the resource is created for the <em>Operator</em>, then <code>&lt;deployment-name&gt;</code> will be whatever is specified in <code><a href="#couchbaseOperator-name">couchbaseOperator.name</a></code>.</p>
</li>
<li>
<p>If the resource is created for the <em>admission controller</em>, then <code>&lt;deployment-name&gt;</code> will be whatever is specified in <code><a href="#admissionController-name">admissionController.name</a></code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table includes some examples of resources that the chart creates, along with their names:</p>
</div>
<table id="table-operator-helm-names" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Examples of Helm Resource Names</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource/Object</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helm release</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;release-name&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">intent-tortoise</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator deployment</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;release-name&gt;-<a href="#couchbaseOperator-name">couchbaseOperator.name</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">intent-tortoise-couchbase-operator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admission controller service account</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;release-name&gt;-<a href="#admissionController-name">admissionController.name</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">intent-tortoise-couchbase-admission-controller</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="specifying-your-own-resources"><a class="anchor" href="#specifying-your-own-resources"></a>Specifying Your Own Resources</h3>
<div class="paragraph">
<p>The chart allows you to override certain resources (such as service accounts and TLS certificates) with ones that you&#8217;ve already created.
In this case, the names of the resources are determined by you and not the chart, and therefore do not adhere to the naming scheme described in the previous section.
Just make sure to appropriately specify those resources when you install the chart.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rbac"><a class="anchor" href="#rbac"></a>rbac</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">rbac:
  create: true
  apiVersion: v1beta1
  clusterRoleAccess: true
  couchbaseServiceAccountName:
  admissionServiceAccountName:</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Couchbase Operator Chart installs RBAC roles for both the Operator and admission controller.
Helm’s Tiller service must have the appropriate permissions to create the required level of RBAC roles to support your deployment.
Refer to the <a href="helm-setup-guide.html#install-tiller" class="page">Tiller installation instructions</a> to be sure that you&#8217;ve set up Helm to support your deployment&#8217;s RBAC requirements.</p>
</div>
<div class="paragraph">
<p>The Couchbase Operator Chart also deploys Kubernetes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/">service accounts</a> for both the Operator and the admission controller.
(Service accounts are required for the Operator and admission controller to exist.)</p>
</div>
<div class="sect2">
<h3 id="rbac-create"><a class="anchor" href="#rbac-create"></a>create</h3>
<div class="paragraph">
<p>This field specifies whether or not RBAC rules will be created.
This parameter should generally be set to <code>true</code>, since it&#8217;s recommended that you let the chart configure RBAC automatically.
However, you can set this parameter to <code>false</code> if you&#8217;ve already configured RBAC rules for the Operator and admission controller.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If <code>create</code> is set to <code>false</code>, then you&#8217;ll need to create <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/">service accounts</a> for both the Operator and the admission controller.
You would then need to specify those service account names in <code><a href="#rbac-couchbaseServiceAccountName">rbac.couchbaseServiceAccountName</a></code> and <code><a href="#rbac-admissionServiceAccountName">rbac.admissionServiceAccountName</a></code>, respectively.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>create</code> field defaults to <code>true</code> if not specified.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="apiversion"><a class="anchor" href="#apiversion"></a>apiVersion</h3>
<div class="paragraph">
<p>This field specifies the Kubernetes API version to use for creating RBAC resources.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>apiVersion</code> field defaults to <code>v1beta1</code> if not specified.
Supported values follow Kubernetes <a href="https://kubernetes.io/docs/concepts/overview/kubernetes-api/#api-versioning">api versioning</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="clusterroleaccess"><a class="anchor" href="#clusterroleaccess"></a>clusterRoleAccess</h3>
<div class="paragraph">
<p>This field specifies whether or not the Operator should be given access to resources in the entire Kubernetes cluster, or restricted to just its namespace.</p>
</div>
<div class="paragraph">
<p>Setting <code>clusterRoleAccess</code> to <code>false</code> is recommended for production.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When <code>clusterRoleAccess</code> is set to <code>false</code>, the operator will not be able to create the CustomResourceDefinition (CRD).
This is because the CRD is a cluster-wide resource in Kubernetes.
Make sure to <a href="helm-setup-guide.html#deploy-production" class="page">manually install the CRD</a> if you set this field to <code>false</code>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>clusterRoleAccess</code> value defaults to <code>true</code> if not specified.
When set to <code>true</code>, the service account of the Operator gets bound to a <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings">cluster role</a>.
When set to <code>false</code>, the service account is bound to a standalone role.
This field does not apply to the admission controller since it requires cluster wide access.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rbac-couchbaseServiceAccountName"><a class="anchor" href="#rbac-couchbaseServiceAccountName"></a>couchbaseServiceAccountName</h3>
<div class="paragraph">
<p>This field specifies the name to use as the service account for the Operator.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If nothing is specified for <code>couchbaseServiceAccountName</code>, then the value defaults to whatever is specified in <code><a href="#couchbaseOperator-name">couchbaseOperator.name</a></code>.
When <code><a href="#rbac-create">rbac.create</a></code> is set to <code>false</code>, you must specify the name of a pre-existing service account that you&#8217;ve already manually created.
When <code><a href="#rbac-create">rbac.create</a></code> is set to <code>true</code>, you can specify a custom name that the chart will give to the Operator service account.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rbac-admissionServiceAccountName"><a class="anchor" href="#rbac-admissionServiceAccountName"></a>admissionServiceAccountName</h3>
<div class="paragraph">
<p>This field specifies the name to use as the service account for the admission controller.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If nothing is specified for <code>admissionServiceAccountName</code>, then the value defaults to whatever is specified in <code><a href="#admissionController-name">admissionController.name</a></code>.
When <code><a href="#rbac-create">rbac.create</a></code> is set to <code>false</code>, you must specify the name of a pre-existing service account that you&#8217;ve already manually created.
When <code><a href="#rbac-create">rbac.create</a></code> is set to <code>true</code>, you can specify a custom name that the chart will give to the admission controller service account.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployments"><a class="anchor" href="#deployments"></a>deployments</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">deployments:
  couchbaseOperator: true
  admissionController: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Couchbase Operator Chart creates two deployments: One for the Operator itself, and one for the admission controller.
These fields must be set to <code>true</code> for the Helm chart to function properly.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>deployments.couchbaseOperator</code> and <code>deployments.couchbaseOperator</code> fields are Boolean values that default to <code>true</code> when not specified.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="couchbaseoperator"><a class="anchor" href="#couchbaseoperator"></a>couchbaseOperator</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">couchbaseOperator:
  name: "couchbase-operator"
  image:
    repository: couchbase/operator
    tag: 1.2.0-DP
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []
  commandArgs:
    create-crd: true
  readinessProbe:
    initialDelaySeconds: 3
    periodSeconds: 3
    failureThreshold: 19
    port: 8080
  resources:
    cpu: 100m
    memory: 128Mi
  nodeSelector: {}
  tolerations: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Helm chart deploys the Operator as a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a>.</p>
</div>
<div class="sect2">
<h3 id="couchbaseOperator-name"><a class="anchor" href="#couchbaseOperator-name"></a>name</h3>
<div class="paragraph">
<p>This field specifies the name of the Operator deployment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>name</code> field defaults to <code>couchbase-operator</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="image"><a class="anchor" href="#image"></a>image</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  image:
    repository: couchbase/operator
    tag: 1.2.0-DP</code></pre>
</div>
</div>
<div class="paragraph">
<p>The repository and tag to use for pulling the Operator image.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>image.repository</code> value can refer to any repository.
The <code>image.tag</code> field can refer to any version of the Operator image in the repository.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="imagepullpolicy"><a class="anchor" href="#imagepullpolicy"></a>imagePullPolicy</h3>
<div class="paragraph">
<p>The policy for pulling images from the repository onto hosts.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>imagePullPolicy</code> value defaults to <code>IfNotPresent</code>, which means that images are only pulled if they&#8217;re not present on the Kubernetes node.
Values allowed are <code>Always</code>, <code>IfNotPresent</code>, and <code>Never</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="imagepullsecrets"><a class="anchor" href="#imagepullsecrets"></a>imagePullSecrets</h3>
<div class="paragraph">
<p>An optional list referencing secrets to use for pulling the image.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>imagePullSecrets</code> value is a list which is not set by default.
Refer to the Operator documentation about <a href="install-openshift.html#create-an-imagepullsecret" class="page">creating pull secrets</a>.
When using the Helm CLI to override pull secrets, the list should be denoted as a comma delimited list within curly braces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install --set couchbaseOperator.imagePullSecrets={pullsecret1,pullsecret2} couchbase/couchbase-operator</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="commandargs"><a class="anchor" href="#commandargs"></a>commandArgs</h3>
<div class="paragraph">
<p>This spec allows you to specify command line arguments to pass on to the Operator.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>commandArgs</code> value is a key-value map of arguments that can be used to modify the behavior of the Operator image.
The <code>-create-crd:</code> argument is set to <code>true</code> by default, which means that the Operator will attempt to create the CRD if it doesn&#8217;t already exist.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
If you have not given the Operator cluster-wide privileges, then <code>-create-crd: true</code> will fail if you have not manually deployed the CRD.
Refer to the <a href="helm-setup-guide.html#deploy-production" class="page">production deployment documentation</a> for information about manually creating the CRD.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="readinessprobe"><a class="anchor" href="#readinessprobe"></a>readinessProbe</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  readinessProbe:
    initialDelaySeconds: 3
    periodSeconds: 3
    failureThreshold: 19
    port: 8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration of the readiness probe used by Kubernetes to determine whether the Operator pod is ready.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Refer to the Kubernetes documentation on <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes">configuring probes</a> for more information about configuring the <code>readinessProbe</code> values.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="resources"><a class="anchor" href="#resources"></a>resources</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  resources:
    cpu: 100m
    memory: 128Mi</code></pre>
</div>
</div>
<div class="paragraph">
<p>Resources for CPU and memory of the Operator pod.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Refer to the Kubernetes documentation on <a href="https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/#specify-a-memory-request-and-a-memory-limit">specifying request limits</a> for more information about configuring the <code>resources</code> values.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admissioncontroller"><a class="anchor" href="#admissioncontroller"></a>admissionController</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">admissionController:
  name: "couchbase-admission-controller"
  image:
    repository: couchbase/admission-controller
    tag: 1.2.0-DP
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []
  verboseLogging: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Helm chart deploys the admission controller as a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a>.</p>
</div>
<div class="sect2">
<h3 id="admissionController-name"><a class="anchor" href="#admissionController-name"></a>name</h3>
<div class="paragraph">
<p>This field specifies the name of the admission controller deployment.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>name</code> field defaults to <code>couchbase-admission-controller</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="image-2"><a class="anchor" href="#image-2"></a>image</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  image:
    repository: couchbase/admission-controller
    tag: 1.2.0-DP</code></pre>
</div>
</div>
<div class="paragraph">
<p>The repository and tag to use for pulling the admission controller image.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>image.repository</code> value can refer to any repository.
The <code>image.tag</code> field can refer to any version of the admission controller image in the repository.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="imagepullpolicy-2"><a class="anchor" href="#imagepullpolicy-2"></a>imagePullPolicy</h3>
<div class="paragraph">
<p>The policy for pulling images from the repository onto hosts.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>imagePullPolicy</code> value defaults to <code>IfNotPresent</code>, which means that images are only pulled if they&#8217;re not present on the Kubernetes node.
Values allowed are <code>Always</code>, <code>IfNotPresent</code>, and <code>Never</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="imagepullsecrets-2"><a class="anchor" href="#imagepullsecrets-2"></a>imagePullSecrets</h3>
<div class="paragraph">
<p>An optional list referencing secrets to use for pulling the image.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>imagePullSecrets</code> value is a list which is not set by default.
Refer to the Operator documentation about <a href="install-openshift.html#create-an-imagepullsecret" class="page">creating pull secrets</a>.
When using the Helm CLI to override pull secrets, the list should be denoted as a comma delimited list within curly braces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install --set admissionController.imagePullSecrets={pullsecret1,pullsecret2} couchbase/couchbase-operator</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="verboselogging"><a class="anchor" href="#verboselogging"></a>verboseLogging</h3>
<div class="paragraph">
<p>Determines whether the admission controller should log all of its validation notices within the console.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>verboseLogging</code> field is a boolean value that is set to <code>true</code> by default.
When set to <code>false</code>, only validation errors are logged within the pod&#8217;s console.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admissionservice"><a class="anchor" href="#admissionservice"></a>admissionService</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">admissionService:
  create: true
  name:
  port: 443</code></pre>
</div>
</div>
<div class="paragraph">
<p>The admission service is used by the webhooks to access the admission operator.
Certificates are auto-generated for this service whenever this object is enabled.</p>
</div>
<div class="sect2">
<h3 id="create"><a class="anchor" href="#create"></a>create</h3>
<div class="paragraph">
<p>Value to determine if the admission service should be created.
To create a service with your own certificates, set <code>admissionSrevice.create</code> to <code>false</code> and provide the name of your service in <code>admissionService.name</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>create</code> field is a boolean value that is set to <code>true</code> by default.
When set to <code>false</code>, you must specify the name of a pre-existing service in <code><a href="#admissionService-name">admissionSrevice.name</a></code> that you&#8217;ve already manually created.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="admissionService-name"><a class="anchor" href="#admissionService-name"></a>name</h3>
<div class="paragraph">
<p>Name of the admission service.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>name</code> value defaults to whatever is specified in <code><a href="#admissionController-name">admissionController.name</a></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admissionCA"><a class="anchor" href="#admissionCA"></a>admissionCA</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">admissionCA:
  create: true
  cert:
  key:
  expiration: 365</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>admissionCA</code> spec specifies the CA certificates that are applied to validating webhooks.</p>
</div>
<div class="paragraph">
<p>By default, the CA certificate and key is auto-generated.
The following example shows how to use a self-signed certificate:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Create Certificates</strong></p>
<div class="paragraph">
<p>Use openssl to create <code>myCA.key</code> and <code>myCA.pem</code> in your current directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">openssl genrsa -out myCA.key 2048
openssl req -x509 -new -nodes -key myCA.key -sha256 -days 1825 -outform PEM -out myCA.pem</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Install the chart with certificates</strong></p>
<div class="paragraph">
<p>Use <code>--set-file</code> to import the files from your current directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install  --set-file admissionCA.cert=myCA.pem \
              --set-file admissionCA.key=myCA.key \
              couchbase/couchbase-operator</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Refer to the <a href="tls.html" class="page">TLS documentation</a> for manually creating certificates and keys that can be used to override the autogenerated secret.</p>
</div>
<div class="sect2">
<h3 id="create-2"><a class="anchor" href="#create-2"></a>create</h3>
<div class="paragraph">
<p>This value determines whether the chart should create the CA certificate.
When set to <code>false</code>, you will need to provide values for <code>cert</code> and <code>key</code> to use as overrides.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>create</code> field is a boolean value that is set to <code>true</code> by default.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="cert"><a class="anchor" href="#cert"></a>cert</h3>
<div class="paragraph">
<p>The PEM format CA certificate.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>cert</code> value defaults to an auto-generated CA certificate.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="key"><a class="anchor" href="#key"></a>key</h3>
<div class="paragraph">
<p>The PEM format CA key.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>key</code> value defaults to an auto-generated CA key.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="expiration"><a class="anchor" href="#expiration"></a>expiration</h3>
<div class="paragraph">
<p>Expiration of CA certificate in days.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>expiration</code> value defaults to 365 days.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admissionsecret"><a class="anchor" href="#admissionsecret"></a>admissionSecret</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">admissionSecret:
  create: true
  name:
  cert:
  key:</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>admissionSecret</code> spec specifies the secret for the admission controller to use for validating cluster specs securely over the admission service.</p>
</div>
<div class="paragraph">
<p>To use a custom secret, you will also need to provide the CA that was used to generate the certificates and keys within the secret.
The following example shows how to use a self-signed CA and client:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Create CA and client certificates</strong></p>
<div class="paragraph">
<p>Use easyrsa CA and signed client cert with DNS <code>cb-example.default.svc</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">./easyrsa build-ca nopasss
./easyrsa --subject-alt-name=DNS:cb-example.default.svc build-server-full admission-controller nopas</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Install chart with client certificates</strong></p>
<div class="paragraph">
<p>Install chart with custom certs and be sure to set <code>admissionService.name</code> to DNS name.</p>
</div>
<div class="paragraph">
<p>This example also sets <code>--namespace default</code> option since this is also included in the DNS of cert we created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install  --namespace ci-testcluster \
              --set admissionService.name=ci-testcluster \
              --set-file admissionCA.cert=/home/ubuntu/easy-rsa/easyrsa3/pki/ca.crt \
              --set-file admissionCA.key=/home/ubuntu/easy-rsa/easyrsa3/pki/private/ca.key \
              --set-file admissionSecret.cert=/home/ubuntu/easy-rsa/easyrsa3/pki/issued/admission-controller.crt \
              --set-file admissionSecret.key=/home/ubuntu/easy-rsa/easyrsa3/pki/private/admission-controller.key \
              couchbase/couchbase-operator</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="create-3"><a class="anchor" href="#create-3"></a>create</h3>
<div class="paragraph">
<p>This value determines whether the chart should create the secret used by the admission controller.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>admissionSecret.create</code> field is a boolean value that defaults to <code>true</code>.
When set to <code>false</code>, you must provide the name of a pre-existing certificate to <code><a href="#admissionSecret-name">admissionSecret.name</a></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="admissionSecret-name"><a class="anchor" href="#admissionSecret-name"></a>name</h3>
<div class="paragraph">
<p>This value is the name of the secret that contains the certificates for the admission operator.
This value must refer to a native kubernetes secret which contains values for TLS <code>cert</code> and <code>key</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>admissionSecret.name</code> value defaults to the name of the admission controller deployment.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="cert-2"><a class="anchor" href="#cert-2"></a>cert</h3>
<div class="paragraph">
<p>PEM format certificate to use as the admission controller&#8217;s public key during validation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>admissionSecret.cert</code> value is auto-generated by default from <code><a href="#admissionCA">admissionCA</a></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="key-2"><a class="anchor" href="#key-2"></a>key</h3>
<div class="paragraph">
<p>PEM format key to use as the admission controllers private key during validation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Field Rules:</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <code>admissionSecret.key</code> value is auto-generated by default from <code><a href="#admissionCA">admissionCA</a></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/mark.js"></script>
  </body>
</html>
